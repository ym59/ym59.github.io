<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clinical mental health classifier with a dash of "Vibe coding"</title>
  <meta name="description" content="A CNN+TF-IDF ensemble wrapped in a Flask app that tries to understand Reddit posts with a safety-first crisis override.">
  <meta property="og:title" content="Praw praw and emotions">
  <meta property="og:description" content="A CNN+TF-IDF ensemble wrapped in a Flask app that tries to understand Reddit posts with a safety-first crisis override.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://ym59.github.io/blogs/posts/praw-praw-and-emotions.html">
  <meta property="og:image" content="https://ym59.github.io/images/YM.png">
  <meta property="article:published_time" content="Sep 15, 2025">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Praw praw and emotions">
  <meta name="twitter:description" content="A CNN+TF-IDF ensemble wrapped in a Flask app that tries to understand Reddit posts with a safety-first crisis override.">
  <meta name="keywords" content="Python, AI, WebDev, Reddit">

  <link rel="icon" href="../images/YM.ico" />
  <link rel="stylesheet" href="../styles/post-common.css">
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --text:#cbd5e1;
      --muted:#94a3b8;
      --accent:#7dd3fc;
      --accent-2:#60a5fa;
      --glass:rgba(255,255,255,0.03);
      --radius:14px;
      color-scheme:dark;
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
    }
    html.light{
      --bg:#f7fafc;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#536171;
      --accent:#0ea5e9;
      --accent-2:#2563eb;
      --glass:rgba(2,6,23,0.05);
      color-scheme:light;
    }

    html,body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
    }
    .container{max-width:900px;margin:0 auto;padding:28px 20px}
    h1{color:var(--accent-2)}
    .meta{color:var(--muted);font-size:0.95rem;margin-bottom:14px}
    .tags{margin-top:18px}
    .tag{display:inline-block;background:var(--glass);padding:6px 10px;border-radius:999px;margin-right:8px;color:var(--accent);border:1px solid rgba(125,211,252,0.15)}
    a.home{display:inline-block;margin-top:18px;color:var(--accent-2);text-decoration:none}
    a.home:hover{text-decoration:underline}
    .content{line-height:1.75;color:var(--text)}
    .callout{background:var(--card);border:1px solid var(--glass);padding:12px 14px;border-radius:10px}

    .post-top{display:flex;align-items:center;gap:12px;margin-bottom:6px}
    .spacer{flex:1}

	.theme-toggle{
	  width:40px;
	  height:40px;
	  padding:0;
	  border-radius:10px;
	  cursor:pointer;
	  border:1px solid var(--glass);
	  background:transparent;
	  display:inline-flex;
	  align-items:center;
	  justify-content:center;
	  color:var(--muted);
	  line-height:0;           /* no extra baseline space */
	  /* no overflow hidden here */
	  box-sizing:border-box;
	}
	.theme-toggle svg{
	  width:22px;              /* a bit larger but still safe */
	  height:22px;
	  display:block;           /* removes baseline offset */
	  overflow:visible;        /* allow stroke to extend outside viewBox */
	}
  </style>
</head>
<body>
  <div class="container">
    <div class="post-top">
      <a href="../nav.html" class="home">← Back to blog</a>
      <div class="spacer"></div>
  
      <button class="theme-toggle" id="themeToggle" aria-pressed="false" title="Toggle theme">
  	  <svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
  		   fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round">
  		<circle cx="12" cy="12" r="4"></circle>
  		<path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41"></path>
  	  </svg>
  	  <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
  		   fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" style="display:none">
  		<path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
  	  </svg>
  	</button>
    </div>
   
    <h1>Clinical mental health classifier with a dash of "Vibe coding"</h1>
    <div class="meta">Published: Sep 15, 2025 • Author: Yash Mathur</div>

    <div class="content">
      <h3>How it started: vibes and Reddit posts</h3>
      <p>
        This whole project began with the slightly unhinged idea of building a system that could read a Reddit post
        and say something vaguely intelligent about the writer’s mental state. 
        Not diagnose, that’s far too ambitious, but <em>classify</em> the tone into clinical categories like “Anxiety Disorder” or “Mood Disorder,”
        and flash appropriate resources when the language looks risky.
      </p>
      <p>
        It started as a college project and ended up becoming a Flask app stitched to a CNN + TF-IDF ensemble,
        with crisis override logic stubbornly baked in.
      </p>

      <h3>Two brains are better than one</h3>
      <p>
        The model is technically a duet:
      </p>
      <ul>
        <li>The <strong>CNN</strong> acts like a close reader, scanning the text sequence and paying attention to context.</li>
        <li>The <strong>TF-IDF model</strong> is the pedantic linguist, fixated on word importance and frequency.</li>
      </ul>
      <p>
        Their outputs are averaged, producing a probability distribution that’s cleaner than either model alone.
        Confidence is judged not just by peak probability but also by entropy, a rough measure of how certain the model actually is.
      </p>

      <h3>PRAW, or: How I stopped worrying and learned to fetch</h3>
      <p>
        Reddit posts are the fuel here. 
        If you paste a link, the backend uses PRAW if available (fancy) or JSON scraping if not (less fancy but works).
        Title and body text are combined, cleaned, and served straight to the classifier.
      </p>
      <p>
        <code>clean_text()</code> quietly removes URLs, handles, and general Reddit noise, so the models don’t have to work overtime.
      </p>

      <h3>The red button: crisis override</h3>
      <p>
        Before the models even get a chance, every input is checked for a list of crisis keywords.
        If a match appears, the system <em>ignores the classifier entirely</em> and throws up crisis support resources.
        This is intentional. When someone says “I want to die,” no neural network should be allowed to debate probabilities.
      </p>
      <div class="callout">
        This isn’t just a neat feature, it’s the difference between treating text like data and remembering it comes from real people.
      </div>

      <h3>Making labels human again</h3>
      <p>
        Instead of subreddits or cryptic tags, outputs are mapped to clinical categories, 
        Anxiety Disorder, PTSD, Substance Use Disorder, General Emotional Distress, and more —
        each with a brief description and resource links. Crisis cases bring up hotline numbers directly.
      </p>
      <p>
        The UI uses Chart.js to draw a confidence gauge and probability bars.
        It’s part science, part UX storytelling.
      </p>

      <h3>Structure of a tiny classifier</h3>
      <ul>
        <li><strong>Frontend:</strong> One HTML page, Bootstrap styling, and Chart.js visualization.</li>
        <li><strong>Backend:</strong> Flask routes <code>/</code>, <code>/fetch</code>, and <code>/predict</code>.</li>
        <li><strong>Models:</strong> CNN and TF-IDF averaged after softmax.</li>
        <li><strong>Safety:</strong> Crisis override > classification.</li>
      </ul>

      <div class="callout">
        It’s small, explainable, and intentionally cautious, an experiment in making machine learning feel less like a black box and more like a careful collaborator.
      </div>
    </div>

    <div class="tags">
      <span class="tag">Python</span><span class="tag">AI</span><span class="tag">WebDev</span><span class="tag">Reddit</span>
    </div>
    <p style="margin-top:36px;color:#94a3b8">
      Share: <a href="https://ym59.github.io/blogs/posts/praw-praw-and-emotions.html">
      https://ym59.github.io/blogs/posts/praw-praw-and-emotions.html</a>
    </p>
  </div>
  <script>
    (function(){
      const root=document.documentElement;
      const toggleBtn=document.getElementById('themeToggle');
      const sun=document.getElementById('sun');
      const moon=document.getElementById('moon');

      function setTheme(mode){
        if(mode==='light'){
          root.classList.add('light');
          toggleBtn?.setAttribute('aria-pressed','true');
          sun.style.display='none'; moon.style.display='block';
          localStorage.setItem('site-theme','light');
        }else{
          root.classList.remove('light');
          toggleBtn?.setAttribute('aria-pressed','false');
          sun.style.display='block'; moon.style.display='none';
          localStorage.setItem('site-theme','dark');
        }
      }

      const saved=localStorage.getItem('site-theme');
      const prefersLight=window.matchMedia('(prefers-color-scheme: light)').matches;
      setTheme(saved ? saved : (prefersLight ? 'light' : 'dark'));

      toggleBtn?.addEventListener('click',()=>{
        const next=document.documentElement.classList.contains('light')?'dark':'light';
        setTheme(next);
      });
    })();
  </script>
</body>
</html>

