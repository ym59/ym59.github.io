<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clinical mental health classifier with a dash of "Vibe coding"</title>
  <meta name="description" content="A CNN+TF-IDF ensemble wrapped in a Flask app that tries to understand Reddit posts with a safety-first crisis override.">
  <meta property="og:title" content="Praw praw and emotions">
  <meta property="og:description" content="A CNN+TF-IDF ensemble wrapped in a Flask app that tries to understand Reddit posts with a safety-first crisis override.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://ym59.github.io/blogs/posts/praw-praw-and-emotions.html">
  <meta property="og:image" content="https://ym59.github.io/images/YM.png">
  <meta property="article:published_time" content="Sep 15, 2025">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Praw praw and emotions">
  <meta name="twitter:description" content="A CNN+TF-IDF ensemble wrapped in a Flask app that tries to understand Reddit posts with a safety-first crisis override.">
  <meta name="keywords" content="Python, AI, WebDev, Reddit">

  <link rel="icon" href="../images/YM.ico" />
  <link rel="stylesheet" href="../styles/post-common.css">
  <style>
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0f1724;color:#cbd5e1;padding:28px}
    .container{max-width:900px;margin:0 auto}
    h1{color:#60a5fa}
    .meta{color:#94a3b8;font-size:0.95rem;margin-bottom:14px}
    .tags{margin-top:18px}
    .tag{display:inline-block;background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:999px;margin-right:8px;color:#7dd3fc}
    a.home{display:inline-block;margin-top:18px;color:#60a5fa}
    .content{line-height:1.75;color:#cbd5e1}
    .callout{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);padding:12px 14px;border-radius:10px}
    @media (prefers-color-scheme:light) { body{background:#fff;color:#0b1220} }
  </style>
</head>
<body>
  <div class="container">
    <a href="../nav.html" class="home">← Back to blog</a>
    <h1>Clinical mental health classifier with a dash of "Vibe coding"</h1>
    <div class="meta">Published: Sep 15, 2025 • Author: Yash Mathur</div>

    <div class="content">
      <h3>How it started: vibes and Reddit posts</h3>
      <p>
        This whole project began with the slightly unhinged idea of building a system that could read a Reddit post
        and say something vaguely intelligent about the writer’s mental state. 
        Not diagnose, that’s far too ambitious, but <em>classify</em> the tone into clinical categories like “Anxiety Disorder” or “Mood Disorder,”
        and flash appropriate resources when the language looks risky.
      </p>
      <p>
        It started as a college project and ended up becoming a Flask app stitched to a CNN + TF-IDF ensemble,
        with crisis override logic stubbornly baked in.
      </p>

      <h3>Two brains are better than one</h3>
      <p>
        The model is technically a duet:
      </p>
      <ul>
        <li>The <strong>CNN</strong> acts like a close reader, scanning the text sequence and paying attention to context.</li>
        <li>The <strong>TF-IDF model</strong> is the pedantic linguist, fixated on word importance and frequency.</li>
      </ul>
      <p>
        Their outputs are averaged, producing a probability distribution that’s cleaner than either model alone.
        Confidence is judged not just by peak probability but also by entropy, a rough measure of how certain the model actually is.
      </p>

      <h3>PRAW, or: How I stopped worrying and learned to fetch</h3>
      <p>
        Reddit posts are the fuel here. 
        If you paste a link, the backend uses PRAW if available (fancy) or JSON scraping if not (less fancy but works).
        Title and body text are combined, cleaned, and served straight to the classifier.
      </p>
      <p>
        <code>clean_text()</code> quietly removes URLs, handles, and general Reddit noise, so the models don’t have to work overtime.
      </p>

      <h3>The red button: crisis override</h3>
      <p>
        Before the models even get a chance, every input is checked for a list of crisis keywords.
        If a match appears, the system <em>ignores the classifier entirely</em> and throws up crisis support resources.
        This is intentional. When someone says “I want to die,” no neural network should be allowed to debate probabilities.
      </p>
      <div class="callout">
        This isn’t just a neat feature, it’s the difference between treating text like data and remembering it comes from real people.
      </div>

      <h3>Making labels human again</h3>
      <p>
        Instead of subreddits or cryptic tags, outputs are mapped to clinical categories, 
        Anxiety Disorder, PTSD, Substance Use Disorder, General Emotional Distress, and more —
        each with a brief description and resource links. Crisis cases bring up hotline numbers directly.
      </p>
      <p>
        The UI uses Chart.js to draw a confidence gauge and probability bars.
        It’s part science, part UX storytelling.
      </p>

      <h3>Structure of a tiny classifier</h3>
      <ul>
        <li><strong>Frontend:</strong> One HTML page, Bootstrap styling, and Chart.js visualization.</li>
        <li><strong>Backend:</strong> Flask routes <code>/</code>, <code>/fetch</code>, and <code>/predict</code>.</li>
        <li><strong>Models:</strong> CNN and TF-IDF averaged after softmax.</li>
        <li><strong>Safety:</strong> Crisis override > classification.</li>
      </ul>

      <div class="callout">
        It’s small, explainable, and intentionally cautious, an experiment in making machine learning feel less like a black box and more like a careful collaborator.
      </div>
    </div>

    <div class="tags">
      <span class="tag">Python</span><span class="tag">AI</span><span class="tag">WebDev</span><span class="tag">Reddit</span>
    </div>
    <p style="margin-top:36px;color:#94a3b8">
      Share: <a href="https://ym59.github.io/blogs/posts/praw-praw-and-emotions.html">
      https://ym59.github.io/blogs/posts/praw-praw-and-emotions.html</a>
    </p>
  </div>
</body>
</html>
